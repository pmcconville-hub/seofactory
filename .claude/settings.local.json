{
  "permissions": {
    "allow": [
      "Bash(npm run dev:*)",
      "Bash(npm install)",
      "WebSearch",
      "WebFetch(domain:github.com)",
      "mcp__ide__getDiagnostics",
      "Skill(example-skills:skill-creator)",
      "SlashCommand(/superpowers:brainstorm)",
      "Bash(npm install:*)",
      "Bash(supabase --version:*)",
      "Bash(supabase projects:*)",
      "Bash(supabase link:*)",
      "Bash(supabase functions deploy:*)",
      "Bash(supabase functions list:*)",
      "Bash(npx supabase functions:*)",
      "Bash(curl -X POST \"https://blucvnmncvwzlwxoyoum.supabase.co/functions/v1/anthropic-proxy\" -H \"Content-Type: application/json\" -H \"x-anthropic-api-key: test\" -H \"apikey: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJsdWN2bm1uY3Z3emx3eG95b3VtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjMwOTcyODgsImV4cCI6MjAzODY3MzI4OH0.Hb9K_WbGiRuhROWLU-Ek5ZSsRjQdAT2lOy29pnx1hYs\" -d '{\"\"\"\"model\"\"\"\":\"\"\"\"claude-3-haiku-20240307\"\"\"\",\"\"\"\"messages\"\"\"\":[{\"\"\"\"role\"\"\"\":\"\"\"\"user\"\"\"\",\"\"\"\"content\"\"\"\":\"\"\"\"test\"\"\"\"}]}')",
      "Bash(curl -X POST \"https://blucvnmncvwzlwxoyoum.supabase.co/functions/v1/fetch-proxy\" -H \"Content-Type: application/json\" -H \"apikey: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJsdWN2bm1uY3Z3emx3eG95b3VtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjMwOTcyODgsImV4cCI6MjAzODY3MzI4OH0.Hb9K_WbGiRuhROWLU-Ek5ZSsRjQdAT2lOy29pnx1hYs\" -d '{\"\"\"\"url\"\"\"\":\"\"\"\"https://httpbin.org/get\"\"\"\",\"\"\"\"method\"\"\"\":\"\"\"\"GET\"\"\"\"}')",
      "Bash(npx tsc:*)",
      "Bash(curl:*)",
      "Bash(npx playwright:*)",
      "Bash(npm run validate:*)",
      "Bash(npm run test:e2e:ui:*)",
      "Bash(git init:*)",
      "Bash(gh auth:*)",
      "Bash(git add:*)",
      "Bash(git worktree:*)",
      "Skill(superpowers:executing-plans)",
      "Bash(git commit:*)",
      "Skill(superpowers:brainstorming)",
      "Bash(npm run build:*)",
      "Bash(git push:*)",
      "WebFetch(domain:markupgo.com)",
      "Bash(supabase db push:*)",
      "Bash(npx tsx:*)",
      "WebFetch(domain:api.markupgo.com)",
      "Bash(npx supabase:*)",
      "WebFetch(domain:ai.google.dev)",
      "Bash(powershell -Command \"Get-Process node -ErrorAction SilentlyContinue | Stop-Process -Force\")",
      "Bash(netstat:*)",
      "Bash(findstr:*)",
      "Bash(find:*)",
      "Bash(dir:*)",
      "Bash(cat:*)",
      "Bash(grep:*)",
      "Bash(taskkill /F /PID 39172)",
      "Bash(powershell -Command \"Stop-Process -Id 39172 -Force\")",
      "Bash(wc:*)",
      "Bash(SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJsdWN2bm1uY3Z3emx3eG95b3VtIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NzA4MDk1MywiZXhwIjoyMDcyNjU2OTUzfQ.dYBt_SQMnOoOVFtwZQg7iIxWmTuRoNnG8Nsgp_kFPD8 npx tsx:*)",
      "Bash(cd:*)",
      "Bash(set:*)",
      "Bash($env:SUPABASE_SERVICE_ROLE_KEY=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJsdWN2bm1uY3Z3emx3eG95b3VtIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NzA4MDk1MywiZXhwIjoyMDcyNjU2OTUzfQ.dYBt_SQMnOoOVFtwZQg7iIxWmTuRoNnG8Nsgp_kFPD8\")",
      "WebFetch(domain:blucvnmncvwzlwxoyoum.supabase.co)",
      "Bash(git reset:*)",
      "Bash(node -e:*)",
      "Bash(taskkill:*)",
      "Bash(powershell -Command \"Stop-Process -Id 35640 -Force\")",
      "Bash(move \"D:\\www\\cost-of-retreival-reducer\\supabase\\migrations\\20251215100000_ai_usage_logs.sql\" \"D:\\www\\cost-of-retreival-reducer\\supabase\\migrations\\20251215200000_ai_usage_logs.sql\")",
      "Bash(powershell:*)",
      "WebFetch(domain:docs.anthropic.com)",
      "WebFetch(domain:docs.claude.com)",
      "Bash(move \"D:\\www\\cost-of-retreival-reducer\\supabase\\migrations\\20251216100000_insight_actions.sql\" \"D:\\www\\cost-of-retreival-reducer\\supabase\\migrations\\20251216300000_insight_actions.sql\")",
      "Bash(move:*)",
      "Bash(if not exist \"D:\\www\\cost-of-retreival-reducer\\docs\\plans\" mkdir \"D:\\www\\cost-of-retreival-reducer\\docs\\plans\")",
      "WebFetch(domain:kalicube.com)",
      "Bash(ls:*)",
      "Skill(document-skills:webapp-testing)",
      "Bash(python:*)",
      "Bash(node scripts/update-modal-imports.js:*)",
      "Bash(npx eslint:*)",
      "Bash(VITE_SUPABASE_URL=https://shtqshmmsrmtquuhyupl.supabase.co SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNodHFzaG1tc3JtdHF1dWh5dXBsIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2NTgwMzk3MSwiZXhwIjoyMDgxMzc5OTcxfQ.ozPGxDAEky3aQoJkdRN007LYlTapkIBbyFCklD1TNe0 npx tsx:*)",
      "WebFetch(domain:shtqshmmsrmtquuhyupl.supabase.co)",
      "Bash(git clean:*)",
      "Bash(git tag:*)",
      "Bash(if not exist \"D:\\\\www\\\\cost-of-retreival-reducer\\\\scripts\\\\test\" mkdir \"D:\\\\www\\\\cost-of-retreival-reducer\\\\scripts\\\\test\")",
      "Bash(if not exist \"D:\\\\www\\\\cost-of-retreival-reducer\\\\docs\\\\test-reports\" mkdir \"D:\\\\www\\\\cost-of-retreival-reducer\\\\docs\\\\test-reports\")",
      "Bash(SUPABASE_SERVICE_ROLE_KEY=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNodHFzaG1tc3JtdHF1dWh5dXBsIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2NTgwMzk3MSwiZXhwIjoyMDgxMzc5OTcxfQ.ozPGxDAEky3aQoJkdRN007LYlTapkIBbyFCklD1TNe0\" npx tsx \"D:/www/cost-of-retreival-reducer/scripts/test/runComprehensiveAudit.ts\")",
      "Bash(supabase db execute:*)",
      "Bash(SUPABASE_SERVICE_ROLE_KEY=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNodHFzaG1tc3JtdHF1dWh5dXBsIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2NTgwMzk3MSwiZXhwIjoyMDgxMzc5OTcxfQ.ozPGxDAEky3aQoJkdRN007LYlTapkIBbyFCklD1TNe0\" npx tsx -e \"\nconst { createClient } = require\\(''@supabase/supabase-js''\\);\nconst supabase = createClient\\(\n  ''https://shtqshmmsrmtquuhyupl.supabase.co'',\n  process.env.SUPABASE_SERVICE_ROLE_KEY\n\\);\n\nasync function fixUserIds\\(\\) {\n  // Get the user ID from auth.users - assuming single user for now\n  const { data: users, error: userError } = await supabase.auth.admin.listUsers\\(\\);\n  if \\(userError\\) {\n    console.error\\(''Error getting users:'', userError\\);\n    return;\n  }\n  \n  console.log\\(''Found users:'', users.users.map\\(u => \\({ id: u.id, email: u.email }\\)\\)\\);\n  \n  // Use the first user''s ID \\(or you can specify\\)\n  const targetUserId = users.users[0]?.id;\n  if \\(!targetUserId\\) {\n    console.error\\(''No users found''\\);\n    return;\n  }\n  \n  console.log\\(''Updating all data to user:'', targetUserId\\);\n  \n  // Update each table\n  const tables = [''user_settings'', ''projects'', ''topical_maps'', ''topics'', ''content_briefs''];\n  \n  for \\(const table of tables\\) {\n    const { data, error, count } = await supabase\n      .from\\(table\\)\n      .update\\({ user_id: targetUserId }\\)\n      .neq\\(''user_id'', targetUserId\\)\n      .select\\(''id''\\);\n    \n    if \\(error\\) {\n      console.log\\(table + '': Error -'', error.message\\);\n    } else {\n      console.log\\(table + '': Updated'', data?.length || 0, ''rows''\\);\n    }\n  }\n  \n  console.log\\(''Done!''\\);\n}\n\nfixUserIds\\(\\);\n\")",
      "Bash($env:SUPABASE_SERVICE_ROLE_KEY=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNodHFzaG1tc3JtdHF1dWh5dXBsIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2NTgwMzk3MSwiZXhwIjoyMDgxMzc5OTcxfQ.ozPGxDAEky3aQoJkdRN007LYlTapkIBbyFCklD1TNe0\")",
      "Bash(SUPABASE_SERVICE_ROLE_KEY=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNodHFzaG1tc3JtdHF1dWh5dXBsIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2NTgwMzk3MSwiZXhwIjoyMDgxMzc5OTcxfQ.ozPGxDAEky3aQoJkdRN007LYlTapkIBbyFCklD1TNe0\" npx tsx \"D:/www/cost-of-retreival-reducer/scripts/fix-user-ids.ts\")",
      "Bash(SUPABASE_SERVICE_ROLE_KEY=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNodHFzaG1tc3JtdHF1dWh5dXBsIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2NTgwMzk3MSwiZXhwIjoyMDgxMzc5OTcxfQ.ozPGxDAEky3aQoJkdRN007LYlTapkIBbyFCklD1TNe0\" npx tsx -e \"\nconst { createClient } = require\\(''@supabase/supabase-js''\\);\nconst supabase = createClient\\(\n  ''https://shtqshmmsrmtquuhyupl.supabase.co'',\n  process.env.SUPABASE_SERVICE_ROLE_KEY\n\\);\n\nasync function checkPolicies\\(\\) {\n  // Check if policies exist\n  const { data, error } = await supabase.rpc\\(''claim_migrated_data''\\);\n  console.log\\(''claim_migrated_data function exists:'', !error || !error.message.includes\\(''function''\\)\\);\n  \n  // Try to get a topic and its map\n  const { data: topics } = await supabase.from\\(''topics''\\).select\\(''id, title, map_id''\\).limit\\(1\\);\n  console.log\\(''Sample topic:'', topics?.[0]\\);\n  \n  if \\(topics?.[0]?.map_id\\) {\n    const { data: maps } = await supabase.from\\(''topical_maps''\\).select\\(''id, user_id''\\).eq\\(''id'', topics[0].map_id\\);\n    console.log\\(''Its map:'', maps?.[0]\\);\n  }\n  \n  // Check if any topics have null map_id\n  const { data: nullMapTopics, count } = await supabase\n    .from\\(''topics''\\)\n    .select\\(''id'', { count: ''exact'' }\\)\n    .is\\(''map_id'', null\\);\n  console.log\\(''Topics with null map_id:'', count\\);\n}\n\ncheckPolicies\\(\\);\n\")",
      "Bash(SUPABASE_SERVICE_ROLE_KEY=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNodHFzaG1tc3JtdHF1dWh5dXBsIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2NTgwMzk3MSwiZXhwIjoyMDgxMzc5OTcxfQ.ozPGxDAEky3aQoJkdRN007LYlTapkIBbyFCklD1TNe0\" npx tsx \"D:/www/cost-of-retreival-reducer/scripts/diagnose-rls.ts\")",
      "Bash(SUPABASE_SERVICE_ROLE_KEY=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNodHFzaG1tc3JtdHF1dWh5dXBsIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2NTgwMzk3MSwiZXhwIjoyMDgxMzc5OTcxfQ.ozPGxDAEky3aQoJkdRN007LYlTapkIBbyFCklD1TNe0\" npx tsx \"D:/www/cost-of-retreival-reducer/scripts/check-ownership.ts\")",
      "Bash(SUPABASE_SERVICE_ROLE_KEY=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNodHFzaG1tc3JtdHF1dWh5dXBsIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2NTgwMzk3MSwiZXhwIjoyMDgxMzc5OTcxfQ.ozPGxDAEky3aQoJkdRN007LYlTapkIBbyFCklD1TNe0\" npx tsx \"D:/www/cost-of-retreival-reducer/scripts/verify-rls-policies.ts\")",
      "Bash(SUPABASE_SERVICE_ROLE_KEY=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNodHFzaG1tc3JtdHF1dWh5dXBsIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2NTgwMzk3MSwiZXhwIjoyMDgxMzc5OTcxfQ.ozPGxDAEky3aQoJkdRN007LYlTapkIBbyFCklD1TNe0\" npx tsx \"D:/www/cost-of-retreival-reducer/scripts/check-brief-topic.ts\")",
      "Bash(if not exist \"D:\\\\www\\\\cost-of-retreival-reducer\\\\components\\\\imageGeneration\\\\HeroImageEditor\" mkdir \"D:\\\\www\\\\cost-of-retreival-reducer\\\\components\\\\imageGeneration\\\\HeroImageEditor\")",
      "Bash(xargs cat:*)"
    ],
    "deny": [],
    "ask": []
  }
}
